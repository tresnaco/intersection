(function(){var t;t=function(i,n){return this instanceof t?(this.iframe=i?document.querySelector(i).contentWindow:null,this.isMaster=n||!1,this._events={},this.frame=function(){return this.isMaster?!1:(window.intersection=new t,window.intersection)},this.master=function(){var i;return this.isMaster?(i=new t,this.iframe.master=i,i):!1},this._on=function(t,i){this._events[t]?this._events[t].push(i):this._events[t]=[i]},this._off=function(t,i){var n;n=this._events[t].filter(function(t){return t===i}),this._events[t]=n},this._emit=function(t,i){var n;if(this._events[t])for(n=0;n<this._events[t].length;)"function"==typeof this._events[t][n]&&this._events[t][n](i),n++},this.on=function(t,i){this.isMaster?this.iframe.intersection.on(t,i):this._on(t,i)},this.off=function(t,i){this.isMaster?this.iframe.intersection.off(t,i):this._off(t,i)},void(this.emit=function(t,i){return this.isMaster?this.iframe.intersection.emit(t,i):this._emit(t,i)})):new t(i,n)},window.Intersection=t}).call(this);
